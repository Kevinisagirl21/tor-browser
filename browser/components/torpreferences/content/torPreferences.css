@import url("chrome://global/skin/browser-colors.css");


#category-connection > .category-icon {
  list-style-image: url("chrome://global/content/torconnect/tor-connect.svg");
}

/* Status */

#torPreferences-status-box {
  display: flex;
  align-items: center;
  gap: 32px;
}

.torPreferences-status-grouping {
  display: flex;
  align-items: center;
  white-space: nowrap;
}

.torPreferences-status-grouping > * {
  flex: 0 0 auto;
}

.torPreferences-status-icon {
  width: 18px;
  height: 18px;
  margin-inline-end: 8px;
  -moz-context-properties: fill, stroke;
  fill: currentColor;
  stroke: currentColor;
}

#torPreferences-status-internet .torPreferences-status-icon {
  list-style-image: url("chrome://browser/content/torpreferences/network.svg");
}

#torPreferences-status-tor-connect .torPreferences-status-icon {
  list-style-image: url("chrome://global/content/torconnect/tor-connect-broken.svg");
}

.torPreferences-status-name {
  font-weight: bold;
  margin-inline-end: 0.75em;
}

.torPreferences-status-result {
  margin-inline-end: 8px;
}

#torPreferences-status-internet.offline .torPreferences-status-icon {
  list-style-image: url("chrome://browser/content/torpreferences/network-broken.svg");
}

#torPreferences-status-tor-connect.connected .torPreferences-status-icon {
  list-style-image: url("chrome://global/content/torconnect/tor-connect.svg");
}

#torPreferences-status-tor-connect.blocked .torPreferences-status-icon {
  /* Same as .tor-connect-status-potentially-blocked. */
  stroke: #c50042;
}

@media (prefers-color-scheme: dark) {
  #torPreferences-status-tor-connect.blocked .torPreferences-status-icon {
    stroke: #ff9aa2;
  }
}

/* Bridge settings */
#torPreferences-bridges-location {
  width: 280px;
}

#torPreferences-bridges-location menuitem[disabled="true"] {
  color: var(--in-content-button-text-color, inherit);
  font-weight: 700;
}

/* Advanced Settings */

h3#torPreferences-requestBridge-header {
  margin: 0;
}

image#torPreferences-requestBridge-captchaImage {
  margin: 16px 0 8px 0;
  min-height: 140px;
}

button#torPreferences-requestBridge-refreshCaptchaButton {
  min-width: initial;
}

#torPreferences-requestBridge-refreshCaptchaButton image {
  -moz-context-properties: fill;
  fill: currentColor;
}

#torPreferences-requestBridge-captchaTextbox {
  flex: 1 0 auto;
}

dialog#torPreferences-requestBridge-dialog > hbox {
  margin-bottom: 1em;
}

/*
 Various elements that really should be lining up don't because they have inconsistent margins
*/
.torMarginFix {
  margin-left : 4px;
  margin-right : 4px;
}

/* Show bridge QR dialog */
#bridgeQr {
  /* Some readers don't recognize QRs with inverted colors, so let's make
  the ones are darker than zeroes. See
  https://gitlab.torproject.org/tpo/applications/tor-browser/-/issues/41049 */
  --qr-one: black;
  --qr-zero: white;
  background: var(--qr-zero);
  position: relative;
  /* Padding is needed in case the dark theme is used so the bits don't blend
  with whatever the default background color is. */
  padding: 10px;
  margin: auto;
  margin-bottom: 20px;
  max-width: max-content;
  border-radius: 5px;
}

#bridgeQr-target {
  width: 300px;
  height: 300px;
  background: var(--qr-zero);
  color: var(--qr-one);
}

#bridgeQr-onionBox {
  position: absolute;
  width: 70px;
  height: 70px;
  top: calc(50% - 35px);
  left: calc(50% - 35px);
  background-color: var(--qr-zero);
}

#bridgeQr-onion {
  position: absolute;
  width: 38px;
  height: 38px;
  top: calc(50% - 19px);
  left: calc(50% - 19px);
  mask: url("chrome://browser/content/torpreferences/bridge-qr-onion-mask.svg");
  mask-repeat: no-repeat;
  mask-size: 38px;
  background: var(--qr-one);
}

/* Builtin bridge dialog */
#torPreferences-builtinBridge-header {
  margin: 8px 0 10px 0;
}

#torPreferences-builtinBridge-description {
  margin-bottom: 18px;
}

#torPreferences-builtinBridge-typeSelection {
  margin-bottom: 16px;
}

#torPreferences-builtinBridge-typeSelection radio label {
  font-weight: 700;
}

.torPreferences-current-bridge-badge {
  display: flex;
  align-items: center;
  font-size: 0.85em;
  color: var(--in-content-accent-color);
}

.builtin-bridges-option:not(
  .current-builtin-bridge-type
) .torPreferences-current-bridge-badge {
  display: none;
}

.torPreferences-current-bridge-icon {
  margin-inline-start: 1px;
  margin-inline-end: 7px;
  list-style-image: url("chrome://global/skin/icons/check.svg");
  -moz-context-properties: fill;
  fill: currentColor;
  flex: 0 0 auto;
}

/* Request bridge dialog */
/*
  This hbox is hidden by css here by default so that the
  xul dialog allocates enough screen space for the error message
  element, otherwise it gets cut off since dialog's overflow is hidden
*/
hbox#torPreferences-requestBridge-incorrectCaptchaHbox {
  visibility: hidden;
}

image#torPreferences-requestBridge-errorIcon {
  list-style-image: url("chrome://global/skin/icons/warning.svg");
  -moz-context-properties: fill;
  fill: var(--warning-color);
}

groupbox#torPreferences-bridges-group textarea {
  white-space: pre;
  overflow: auto;
}

/* Provide bridge dialog */
#torPreferences-provideBridge-textarea {
  margin-top: 16px;
}

/* Connection settings dialog */
#torPreferences-connection-header {
  margin: 4px 0 14px 0;
}

#torPreferences-connection-grid {
  display: grid;
  grid-template-columns: auto 1fr;
}

#torPreferences-localProxy-textboxAddress,
#torPreferences-localProxy-textboxUsername,
#torPreferences-localProxy-textboxPassword,
#torPreferences-connection-textboxAllowedPorts {
  flex: 1 0 auto;
}

#torPreferences-connection-firewall {
  display: flex;
}

#torPreferences-connection-hboxAllowedPorts {
  flex: 1;
}

/* Tor logs dialog */
textarea#torPreferences-torDialog-textarea {
  flex: 1 0 auto;
  font-family: monospace;
  font-size: 0.8em;
  white-space: pre;
  overflow: auto;
  /* 10 lines */
  min-height: 20em;
}
